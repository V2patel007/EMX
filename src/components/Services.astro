---
const services = [
  {
    title: "Custom Fabrication",
    description:
      "Complete custom manufacturing services tailored to your specifications. We handle projects from single prototypes to full production runs, working with various materials and complexity levels to meet your exact requirements.",
    icon: "üõ†Ô∏è",
  },
  {
    title: "Laser Cutting",
    description:
      "Advanced laser cutting technology delivers precise cuts on steel, aluminum, and stainless steel. Our efficient setup processes and skilled operators ensure quick turnaround times while maintaining tight tolerances.",
    icon: "üî≤",
  },
  {
    title: "Brake Forming",
    description:
      "Professional brake forming services using modern press brake equipment. We handle everything from simple bends to complex formed components, ensuring consistent results across your entire order.",
    icon: "üìè",
  },
  {
    title: "Turret Punching",
    description:
      "High-speed turret punching capabilities for holes, slots, and custom shapes. Our equipment handles multiple operations in single setups, improving efficiency and reducing lead times.",
    icon: "‚õèÔ∏è",
  },
  {
    title: "Rush Manufacturing",
    description:
      "When urgent needs arise, our rapid response manufacturing service delivers. Same-day turnaround is available for critical projects, ensuring your production schedule stays on track.",
    icon: "‚ö°",
  },
  {
    title: "Installation Services",
    description:
      "Professional installation and integration services performed by our certified technicians. We ensure proper fit and function, minimizing downtime and integration challenges.",
    icon: "üèóÔ∏è",
  },
  {
    title: "Maintenance & Support",
    description:
      "Comprehensive maintenance programs and repair services to keep your equipment operating at peak performance. Scheduled maintenance and emergency response services available.",
    icon: "üß∞",
  },
];
---

<section class="services" id="services">
  <div class="container">
    <h2 class="services-title">Our Services</h2>
    <p class="services-subtitle">Comprehensive Manufacturing Solutions</p>

    <div class="services-carousel" id="carousel">
      {services.map((service) => (
        <div class="service-card">
          <div class="service-icon">{service.icon}</div>
          <h3>{service.title}</h3>
          <p>{service.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  let carousel;
  let interval;

  function startCarousel(cardWidth, gap) {
    interval = setInterval(() => {
      if (!carousel) return;

      const maxScroll = carousel.scrollWidth - carousel.clientWidth;
      const next = carousel.scrollLeft + cardWidth + gap;

      carousel.scrollTo({
        left: next > maxScroll ? 0 : next,
        behavior: "smooth",
      });
    }, 3000); // every 3 seconds
  }

  function stopCarousel() {
    clearInterval(interval);
  }

  window.addEventListener("DOMContentLoaded", () => {
    carousel = document.getElementById("carousel");

    if (window.innerWidth <= 768) {
      const firstCard = carousel.querySelector(".service-card");

      // Wait for layout to render
      requestAnimationFrame(() => {
        const cardWidth = firstCard.offsetWidth;
        const gap = 16; // Match CSS gap: 1rem = 16px

        startCarousel(cardWidth, gap);
      });

      carousel.addEventListener("touchstart", stopCarousel, { once: true });
      carousel.addEventListener("wheel", stopCarousel, { once: true });
    }
  });
</script>

<style>
  .services {
    background: radial-gradient(circle at top left, #f1f5f9, #e2e8f0);
    padding: 5rem 1rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .services-title {
    text-align: center;
    font-size: 2.5rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0.5rem;
  }

  .services-subtitle {
    text-align: center;
    font-size: 1.25rem;
    color: #64748b;
    margin-bottom: 2rem;
  }

  .services-carousel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  @media (max-width: 768px) {
    .services-carousel {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      gap: 1rem;
      scroll-behavior: smooth;
      padding-bottom: 1rem;
      -webkit-overflow-scrolling: touch;
    }

    .service-card {
      flex: 0 0 85%;
      min-width: 85%;
      scroll-snap-align: center;
    }
  }

  .service-card {
    background: white;
    padding: 2rem 1.5rem;
    border-radius: 1.25rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    transition: transform 0.3s ease;
  }

  .service-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 14px 32px rgba(0, 0, 0, 0.12);
  }

  .service-icon {
    font-size: 2.5rem;
    background: rgba(0, 123, 255, 0.08);
    backdrop-filter: blur(6px);
    border-radius: 50%;
    padding: 1rem;
    margin-bottom: 1.25rem;
  }

  .service-card h3 {
    font-size: 1.2rem;
    color: #0f172a;
    margin-bottom: 0.75rem;
  }

  .service-card p {
    font-size: 0.95rem;
    color: #475569;
    line-height: 1.6;
  }
</style>
